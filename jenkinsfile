node {
   // Mark the code checkout 'stage'....
   echo 'Hello from jenkinsfile'
   stage 'Checkout'

   // Get some code from a GitHub repository
   //git url: 'https://github.com/Labdoui/PPIV.git'
   git url: 'git@candelo.socrate.vsct.fr:PPIV_team/PPIV.git', branch: 'master'


    // Analysis by sonar
    //stage('Analyse par Sonar') {
      // sh "sonar-runner"
    //}

    stage('JAVA_OPT') {
           sh "export JAVA_OPTS='-Dfile.encoding=UTF-8'"
        }

    //Cleaning stage
    stage('Cleanup') {
       sh "sbt clean"
    }

    //test stage
    stage('test') {
       sh "sbt test"
    }

    //Cleaning stage
    stage('assembly') {
        sh "sbt assembly"
    }
   echo 'End packaging'
 }

